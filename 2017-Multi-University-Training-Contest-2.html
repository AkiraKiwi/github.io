<!DOCTYPE html>
<html>
<head>

    <!-- Document Settings -->
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />

    <!-- Base Meta -->
    <!-- dynamically fixing the title for tag/author pages -->



    <title>2017 Multi-University Training Contest #2</title>
    <meta name="HandheldFriendly" content="True" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <!-- Styles'n'Scripts -->
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.css" />
    <link rel="stylesheet" type="text/css" href="/assets/built/screen.edited.css" />
    <!-- highlight.js -->
    <link media="all" rel="stylesheet" type="text/css"  href="/assets/built/rouge.css" type="text/css">
    <style>pre{background: rgba(0, 0, 0, 0.95);}</style>    
    <!-- <link rel="stylesheet" href="//cdnjs.cloudflare.com/ajax/libs/highlight.js/9.12.0/styles/default.min.css">
    <style>.hljs { background: none; }</style> -->
    <!-- Mathjax -->
    <script src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML" type="text/javascript"></script>
    <script type="text/x-mathjax-config">
    MathJax.Hub.Config({
        tex2jax: {
        skipTags: ['script', 'noscript', 'style', 'textarea', 'pre'],
        inlineMath: [['$','$']]
        }
    });
    </script>
    <!-- This tag outputs SEO meta+structured data and other important settings -->
    <meta name="description" content="The personal publishing platform" />
    <link rel="shortcut icon" href="http://localhost:4000//assets/images/favicon.png" type="image/png" />
    <link rel="canonical" href="http://localhost:4000/2017-Multi-University-Training-Contest-2" />
    <meta name="referrer" content="no-referrer-when-downgrade" />

     <!--title below is coming from _includes/dynamic_title-->
    <meta property="og:site_name" content="drone - 以终为始，慎终如始." />
    <meta property="og:type" content="website" />
    <meta property="og:title" content="2017 Multi-University Training Contest #2" />
    <meta property="og:description" content="Contest Information source: The 2017 Multi-University Training Contest #2 from HDU OJ Problem F 函数 $F_{x,y}$ 满足： \[ F_{1,1} = F_{1,2} = 1 \\ F_{1,i} = F_{1,i-1} + 2\times F_{1,i-2} \ (i≥3) \\ F_{i,j} = \sum^{j+N+1}_{k=j} F_{i-1,k} \ (i≥2,j≥1) \] 给定 $N,M$, 计算 $F_{m,1}\ mod\ 1e9+7$ 数据范围：$ 1 ≤ T" />
    <meta property="og:url" content="http://localhost:4000/2017-Multi-University-Training-Contest-2" />
    <meta property="og:image" content="http://localhost:4000/assets/images/stock/images-stock-photo-20170726.jpg" />
    <meta property="article:publisher" content="https://www.facebook.com/username" />
    <meta property="article:author" content="https://www.facebook.com/username" />
    <meta property="article:published_time" content="2017-07-29T07:59:59+08:00" />
    <meta property="article:modified_time" content="2017-07-29T07:59:59+08:00" />
    <meta property="article:tag" content="Algorithm" />
    <meta name="twitter:card" content="summary_large_image" />
    <meta name="twitter:title" content="2017 Multi-University Training Contest #2" />
    <meta name="twitter:description" content="Contest Information source: The 2017 Multi-University Training Contest #2 from HDU OJ Problem F 函数 $F_{x,y}$ 满足： \[ F_{1,1} = F_{1,2} = 1 \\ F_{1,i} = F_{1,i-1} + 2\times F_{1,i-2} \ (i≥3) \\ F_{i,j} = \sum^{j+N+1}_{k=j} F_{i-1,k} \ (i≥2,j≥1) \] 给定 $N,M$, 计算 $F_{m,1}\ mod\ 1e9+7$ 数据范围：$ 1 ≤ T" />
    <meta name="twitter:url" content="http://localhost:4000/" />
    <meta name="twitter:image" content="http://localhost:4000/assets/images/stock/images-stock-photo-20170726.jpg" />
    <meta name="twitter:label1" content="Written by" />
    <meta name="twitter:data1" content="drone - 以终为始，慎终如始." />
    <meta name="twitter:label2" content="Filed under" />
    <meta name="twitter:data2" content="Algorithm" />
    <meta name="twitter:site" content="@username" />
    <meta name="twitter:creator" content="@username" />
    <meta property="og:image:width" content="1400" />
    <meta property="og:image:height" content="933" />

    <script type="application/ld+json">
{
    "@context": "https://schema.org",
    "@type": "Website",
    "publisher": {
        "@type": "Organization",
        "name": "drone - 以终为始，慎终如始.",
        "logo": "http://localhost:4000/assets/images/blog-icon.png"
    },
    "url": "http://localhost:4000/2017-Multi-University-Training-Contest-2",
    "image": {
        "@type": "ImageObject",
        "url": "http://localhost:4000/assets/images/stock/images-stock-photo-20170726.jpg",
        "width": 2000,
        "height": 666
    },
    "mainEntityOfPage": {
        "@type": "WebPage",
        "@id": "http://localhost:4000/2017-Multi-University-Training-Contest-2"
    },
    "description": "Contest Information source: The 2017 Multi-University Training Contest #2 from HDU OJ Problem F 函数 $F_{x,y}$ 满足： \[ F_{1,1} = F_{1,2} = 1 \\ F_{1,i} = F_{1,i-1} + 2\times F_{1,i-2} \ (i≥3) \\ F_{i,j} = \sum^{j+N+1}_{k=j} F_{i-1,k} \ (i≥2,j≥1) \] 给定 $N,M$, 计算 $F_{m,1}\ mod\ 1e9+7$ 数据范围：$ 1 ≤ T"
}
    </script>

    <!-- <script type="text/javascript" src="https://demo.ghost.io/public/ghost-sdk.min.js?v=724281a32e"></script>
    <script type="text/javascript">
    ghost.init({
    	clientId: "ghost-frontend",
    	clientSecret: "f84a07a72b17"
    });
    </script> -->

    <meta name="generator" content="Jekyll 3.6.2" />
    <link rel="alternate" type="application/rss+xml" title="2017 Multi-University Training Contest #2" href="/feed.xml" />

    

</head>
<body class="post-template">

    <div class="site-wrapper">
        <!-- All the main content gets inserted here, index.hbs, post.hbs, etc -->
        <!-- default -->

<!-- The tag above means: insert everything in this file
into the {body} of the default.hbs template -->

<header class="site-header outer">
    <div class="inner">
        <nav class="site-nav">
    <div class="site-nav-left">
        
            
                <a class="site-nav-logo" href="http://localhost:4000/"><img src="/assets/images/blog-icon.png" alt="drone - 以终为始，慎终如始." /></a>
            
        
        
            <ul class="nav" role="menu">
    <li class="nav-home" role="menuitem"><a href="/">Home</a></li>
    <li class="nav-about" role="menuitem"><a href="/about/">About</a></li>
    <li class="nav-getting-started" role="menuitem"><a href="/tag/getting-started/">Getting Started</a></li>
    <li class="nav-guide" role="menuitem"><a href="/tag/guide/">Guide</a></li>
    <li class="nav-algorithm" role="menuitem"><a href="/tag/algorithm/">Algorithm</a></li> 
    <li class="nav-algorithm" role="menuitem"><a href="/tag/drone/">Drone</a></li>     
</ul>

        
    </div>
    <div class="site-nav-right">
        <div class="social-links">
            
                <a class="social-link social-link-fb" href="https://facebook.com/username" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>
</a>
            
            
                <a class="social-link social-link-tw" href="https://twitter.com/username" target="_blank" rel="noopener"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>
</a>
            
        </div>
        
            <a class="subscribe-button" href="#subscribe">Subscribe</a>
        
    </div>
</nav>

    </div>
</header>

<!-- Everything inside the #post tags pulls data from the post -->
<!-- #post -->

<main id="site-main" class="site-main outer" role="main">
    <div class="inner">

        <article class="post-full  ">

            <header class="post-full-header">
                <section class="post-full-meta">
                    <time class="post-full-meta-date" datetime="28 July 2017">28 July 2017</time>
                    
                        <span class="date-divider">/</span>
                        
                            
                               <a href='/tag/algorithm/'>ALGORITHM</a>
                            
                        
                    
                </section>
                <h1 class="post-full-title">2017 Multi-University Training Contest #2</h1>
            </header>

            
            <figure class="post-full-image" style="background-image: url(/assets/images/stock/images-stock-photo-20170726.jpg)">
            </figure>
            

            <section class="post-full-content">
                <div class="kg-card-markdown">
                    <h2 id="contest-information">Contest Information</h2>

<p>source: <a href="http://acm.hdu.edu.cn/search.php?field=problem&amp;key=2017+Multi-University+Training+Contest+-+Team+2&amp;source=1&amp;searchmode=source">The 2017 Multi-University Training Contest #2 from HDU OJ</a></p>

<h2 id="problem-f">Problem F</h2>

<p>函数 $F_{x,y}$ 满足： <br /></p>

<p>\[
F_{1,1} = F_{1,2} = 1 \\ 
F_{1,i} = F_{1,i-1} + 2\times F_{1,i-2} \  (i≥3) \\ 
F_{i,j} = \sum^{j+N+1}_{k=j} F_{i-1,k} \  (i≥2,j≥1)
\]</p>

<p>给定 $N,M$, 计算 $F_{m,1}\ mod\ 1e9+7$ <br /></p>

<p>数据范围：$ 1 ≤ T ≤ 10^{4}, 1 ≤ N,M &lt; 2^{63} $ <br /></p>

<h2 id="solution">Solution</h2>

<figure>
	<a href="https://akirakiwi.github.io/assets/img/picture/2017MUT2.jpg"><img src="https://akirakiwi.github.io/assets/img/picture/2017MUT2.jpg" /></a>
	<figcaption>
		矩阵快速幂
	</figcaption>
</figure>

<h2 id="problem-h">Problem H</h2>

<p>给出一个 $N\times M$ 的矩阵，每个位置有一个数，现在随机选取一个子矩阵，其中不同数字的个数为这次选取的价值，求随机选取一次子矩阵的价值的期望。 <br /></p>

<p>数据范围：$ 1 ≤ T ≤ 8, 1 ≤ n,m ≤ 100, 0 ≤ g_{i,j} &lt; N\times M  $ <br /></p>

<h2 id="solution-1">Solution</h2>

<p>首先，对于任意一个给定的矩阵，子矩阵可能的情况为 $ \frac{n(n+1)\times m(m+1)}{4} $，然后我们需要计算出每一个子矩阵的价值：<br /></p>

<ul>
  <li>
    <p>枚举原矩阵每一个位置，我们判断它可能在哪些子矩阵中被计数，因为子矩阵价值等于不同数字的个数，所以我们规定，从左上角按行遍历矩阵，对于每一种数字，它有贡献的矩阵不能包含出现在它前面的同种数字，但是出现在后面的没有限制。这样我们就能保证总价值不会算重。</p>
  </li>
  <li>
    <p>对于某一个位置 $g_{i,j}$，我们统计包含它的子矩阵，只需要统计矩阵左上角和右下角的位置即可：</p>
    <ul>
      <li>左上角：我们使用vector保存每一种数字在每一行出现的情况。首先设 $L=1$，特判当前行，如果当前行还有该数字 $g_{i,j’}$，那么 $L$ 更新为 $j’+1$，并统计当前行左上角可能的情况，有 $j-L+1$ 种。然后我们逐行往上遍历，每次查找该数字有没有出现在 $(L,j)$ 之间，有则更新 $L$，且每一行都统计 $j-L+1$。如果这一行在 $j$ 处也有该数字，那么跳出遍历，因为到上界了。</li>
      <li>右下角：右下角往下的范围永远是当前行到最后一行，但是往右是有边界的。首先设 $R=M$，当前行直接统计 $ (R-j+1)\times (N-i+1) $ 种情况。然后我们逐行往上遍历，每次查找该数字有没有出现在 $(j,R)$ 之间，有则更新 $R$，且每一行都统计 $ (R-j+1)\times (N-i+1) $。如果这一行在 $j$ 处也有该数字，那么跳出遍历，因为到上界了。</li>
      <li>左上角和右上角是同步统计的，对于每一行，我们都会累加上 $ (j-L+1)\times (R-j+1)\times (N-i+1) $</li>
    </ul>
  </li>
</ul>

<h2 id="ac-code">AC code</h2>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">int</span> <span class="n">T</span><span class="p">,</span><span class="n">N</span><span class="p">,</span><span class="n">M</span><span class="p">;</span>
<span class="kt">int</span> <span class="n">G</span><span class="p">[</span><span class="mi">110</span><span class="p">][</span><span class="mi">110</span><span class="p">];</span>
<span class="kt">int</span> <span class="n">chazhao</span><span class="p">[</span><span class="mi">10005</span><span class="p">];</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span> <span class="n">V</span><span class="p">[</span><span class="mi">10005</span><span class="p">];</span>
<span class="kt">void</span> <span class="nf">solve</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="o">*</span><span class="n">M</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">V</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">clear</span><span class="p">();</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">N</span><span class="o">*</span><span class="n">M</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">vector</span><span class="o">&lt;</span><span class="n">pair</span><span class="o">&lt;</span><span class="kt">int</span><span class="p">,</span><span class="kt">int</span><span class="o">&gt;</span> <span class="o">&gt;</span><span class="p">().</span><span class="n">swap</span><span class="p">(</span><span class="n">V</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="n">MST</span><span class="p">(</span><span class="n">chazhao</span><span class="p">,</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
    <span class="kt">int</span> <span class="n">cont</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">N</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;=</span><span class="n">M</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">chazhao</span><span class="p">[</span><span class="n">G</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]]</span><span class="o">==-</span><span class="mi">1</span><span class="p">)</span> <span class="n">chazhao</span><span class="p">[</span><span class="n">G</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]]</span> <span class="o">=</span> <span class="n">cont</span><span class="o">++</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">tt</span> <span class="o">=</span> <span class="n">chazhao</span><span class="p">[</span><span class="n">G</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]];</span>
            <span class="n">V</span><span class="p">[</span><span class="n">tt</span><span class="p">].</span><span class="n">pb</span><span class="p">(</span><span class="n">mp</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">));</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">LL</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">N</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;=</span><span class="n">M</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="kt">int</span> <span class="n">num</span> <span class="o">=</span> <span class="n">chazhao</span><span class="p">[</span><span class="n">G</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]];</span>
            <span class="kt">int</span> <span class="n">L</span> <span class="o">=</span> <span class="mi">1</span><span class="p">,</span><span class="n">R</span> <span class="o">=</span> <span class="n">M</span><span class="p">;</span>
            <span class="kt">int</span> <span class="n">loc</span> <span class="o">=</span> <span class="p">(</span><span class="n">lower_bound</span><span class="p">(</span><span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">].</span><span class="n">begin</span><span class="p">(),</span> <span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">].</span><span class="n">end</span><span class="p">(),</span> <span class="n">mp</span><span class="p">(</span><span class="n">i</span><span class="p">,</span><span class="n">j</span><span class="p">))</span><span class="o">-</span><span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">].</span><span class="n">begin</span><span class="p">()</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">if</span><span class="p">(</span><span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">][</span><span class="n">loc</span><span class="p">].</span><span class="n">first</span><span class="o">==</span><span class="n">i</span><span class="p">)</span> <span class="n">L</span> <span class="o">=</span> <span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">][</span><span class="n">loc</span><span class="p">].</span><span class="n">second</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span>
            <span class="n">ans</span> <span class="o">+=</span> <span class="p">(</span><span class="n">j</span><span class="o">-</span><span class="n">L</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">R</span><span class="o">-</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">k</span><span class="o">=</span><span class="n">i</span><span class="o">-</span><span class="mi">1</span><span class="p">;</span><span class="n">k</span><span class="o">&gt;=</span><span class="mi">1</span><span class="p">;</span><span class="n">k</span><span class="o">--</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">loc</span> <span class="o">=</span> <span class="p">(</span><span class="n">lower_bound</span><span class="p">(</span><span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">].</span><span class="n">begin</span><span class="p">(),</span> <span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">].</span><span class="n">end</span><span class="p">(),</span> <span class="n">mp</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="mi">0</span><span class="p">))</span><span class="o">-</span><span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">].</span><span class="n">begin</span><span class="p">());</span>
                <span class="k">if</span><span class="p">(</span><span class="n">loc</span><span class="o">==</span><span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">].</span><span class="n">size</span><span class="p">()</span> <span class="o">||</span> <span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">][</span><span class="n">loc</span><span class="p">].</span><span class="n">first</span> <span class="o">&gt;</span> <span class="n">k</span><span class="p">)</span>
                <span class="p">{</span>
                    <span class="n">ans</span> <span class="o">+=</span> <span class="p">(</span><span class="n">j</span><span class="o">-</span><span class="n">L</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">R</span><span class="o">-</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
                    <span class="k">continue</span><span class="p">;</span>
                <span class="p">}</span>
                <span class="n">loc</span> <span class="o">=</span> <span class="p">(</span><span class="n">lower_bound</span><span class="p">(</span><span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">].</span><span class="n">begin</span><span class="p">(),</span> <span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">].</span><span class="n">end</span><span class="p">(),</span> <span class="n">mp</span><span class="p">(</span><span class="n">k</span><span class="p">,</span><span class="n">j</span><span class="p">))</span><span class="o">-</span><span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">].</span><span class="n">begin</span><span class="p">());</span>
                <span class="k">if</span><span class="p">(</span><span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">][</span><span class="n">loc</span><span class="p">].</span><span class="n">first</span> <span class="o">==</span> <span class="n">k</span> <span class="o">&amp;&amp;</span> <span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">][</span><span class="n">loc</span><span class="p">].</span><span class="n">second</span> <span class="o">==</span> <span class="n">j</span><span class="p">)</span> <span class="k">break</span><span class="p">;</span>
                <span class="k">else</span> 
                <span class="p">{</span>
                    <span class="k">if</span><span class="p">(</span><span class="n">loc</span> <span class="o">==</span> <span class="mi">0</span> <span class="o">||</span> <span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">][</span><span class="n">loc</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="n">first</span> <span class="o">&lt;</span> <span class="n">k</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">R</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">][</span><span class="n">loc</span><span class="p">].</span><span class="n">second</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                        <span class="n">ans</span> <span class="o">+=</span> <span class="p">(</span><span class="n">j</span><span class="o">-</span><span class="n">L</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">R</span><span class="o">-</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span> <span class="k">if</span><span class="p">(</span><span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">][</span><span class="n">loc</span><span class="p">].</span><span class="n">first</span> <span class="o">&gt;</span> <span class="n">k</span><span class="p">)</span>
                    <span class="p">{</span>
                        <span class="n">L</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">][</span><span class="n">loc</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="n">second</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
                        <span class="n">ans</span> <span class="o">+=</span> <span class="p">(</span><span class="n">j</span><span class="o">-</span><span class="n">L</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">R</span><span class="o">-</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
                    <span class="p">}</span>
                    <span class="k">else</span>
                    <span class="p">{</span>
                        <span class="n">L</span> <span class="o">=</span> <span class="n">max</span><span class="p">(</span><span class="n">L</span><span class="p">,</span> <span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">][</span><span class="n">loc</span><span class="o">-</span><span class="mi">1</span><span class="p">].</span><span class="n">second</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
                        <span class="n">R</span> <span class="o">=</span> <span class="n">min</span><span class="p">(</span><span class="n">R</span><span class="p">,</span><span class="n">V</span><span class="p">[</span><span class="n">num</span><span class="p">][</span><span class="n">loc</span><span class="p">].</span><span class="n">second</span><span class="o">-</span><span class="mi">1</span><span class="p">);</span>
                        <span class="n">ans</span> <span class="o">+=</span> <span class="p">(</span><span class="n">j</span><span class="o">-</span><span class="n">L</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">R</span><span class="o">-</span><span class="n">j</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="n">N</span><span class="o">-</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">);</span>
                    <span class="p">}</span>
                <span class="p">}</span>
            <span class="p">}</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">LL</span> <span class="n">tot</span> <span class="o">=</span> <span class="p">(</span><span class="mi">1LL</span><span class="o">*</span><span class="n">N</span><span class="o">*</span><span class="p">(</span><span class="n">N</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2LL</span><span class="p">)</span><span class="o">*</span><span class="p">(</span><span class="mi">1LL</span><span class="o">*</span><span class="n">M</span><span class="o">*</span><span class="p">(</span><span class="n">M</span><span class="o">+</span><span class="mi">1</span><span class="p">)</span><span class="o">/</span><span class="mi">2LL</span><span class="p">);</span>
    <span class="kt">double</span> <span class="n">tmp</span> <span class="o">=</span>  <span class="n">ans</span><span class="o">*</span><span class="mf">1.0</span><span class="o">/</span><span class="p">(</span><span class="n">tot</span><span class="o">*</span><span class="mf">1.0</span><span class="p">);</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%.9f</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span><span class="n">tmp</span><span class="p">);</span>
    
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">T</span><span class="p">);</span>
    <span class="k">while</span><span class="p">(</span><span class="n">T</span><span class="o">--</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="n">scanf</span><span class="p">(</span><span class="s">"%d%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">N</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">M</span><span class="p">);</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;=</span><span class="n">N</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="mi">1</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;=</span><span class="n">M</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
            <span class="p">{</span>
                <span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">G</span><span class="p">[</span><span class="n">i</span><span class="p">][</span><span class="n">j</span><span class="p">]);</span>
            <span class="p">}</span>
        <span class="p">}</span>
        <span class="n">solve</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h2 id="problem-i">Problem I</h2>

<p>给出一个数组 $A_{1…n}$，问有多少个数组 $B_{1…n}$ 满足：<br /></p>

<ul>
  <li>
    <p>$ 1≤B_i≤A_i $</p>
  </li>
  <li>
    <p>对于任意一个区间 $[l,r]$，$gcd(b_l,b_{l+1},…,b_r)≥2$</p>
  </li>
</ul>

<p>数据范围：$ 1 ≤ n, A_i ≤ 10^{5}$ <br /></p>

<h2 id="solution-2">Solution</h2>

<p>首先，由第二个条件问题转换为找到一些 $B_{1..n}$ 使得每一个数都比相应的 $A_i$ 小，且 $gcd(B_1,…B_n) ≥ 2$ <br />
因为数值范围较小，所以先将数组值域化：记录区间 $[1,i]$ 之间有多少个数。然后我们从 $2$ 开始枚举 $gcd$ 值，直到大于任意一个 $A_i$。对于每一个 $gcd$，我们枚举它的倍数 $x$，然后统计 $[x\times gcd, (x+1) \times gcd)$ 内 $A_i$ 的数量 $N$，即代表相应的 $B_i$ 可以在该 $gcd$ 下可以有 $x$ 种取值，那么该 $gcd$ 下的答案累乘上 $x^N$ 次即可，然后最终答案累加每一次枚举 $gcd$ 的答案。<br />
这样枚举不同的 $gcd$ 的倍数得到的 $B_i$ 肯定是有重复的，所以我们需用到容斥原理去重：对于某一个 $gcd$，我们将它质因子分解，如果它含有两个及以上的相同质因子，就直接跳过；如果含有奇数个不同的质因子，则累加答案；如果含有偶数个不同的质因子，则减去答案。这样可以保证答案不重复，证明详见莫比乌斯反演。 <br /></p>

<h2 id="problem-k">Problem K</h2>

<p>二维平面上给N个整数点，问能构成多少个不同的正多边形。<br /></p>

<p>数据范围：$ 1 ≤ N ≤ 500, -100 ≤ x,y ≤ 100$ <br /></p>

<h2 id="solution-3">Solution</h2>

<p>容易得知只有正四边形可以使得所有的顶点为整数点。（具体证明可参考杨景钦在2017的国家队论文） 所以正解即求出所有的正四边形个数。 <br /></p>

<h2 id="ac-code-1">AC code</h2>

<figure class="highlight"><pre><code class="language-c--" data-lang="c++"><span class="kt">int</span> <span class="n">n</span><span class="p">;</span>
<span class="k">struct</span> <span class="n">Node</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">x</span><span class="p">,</span><span class="n">y</span><span class="p">;</span>
    <span class="kt">bool</span> <span class="k">operator</span> <span class="o">&lt;</span> <span class="p">(</span><span class="k">const</span> <span class="n">Node</span> <span class="o">&amp;</span><span class="n">a</span><span class="p">)</span> <span class="k">const</span>
    <span class="p">{</span>
        <span class="k">if</span><span class="p">(</span><span class="n">x</span> <span class="o">==</span> <span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">)</span> <span class="k">return</span> <span class="n">y</span><span class="o">&lt;</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">;</span>
        <span class="k">else</span> <span class="k">return</span> <span class="n">x</span><span class="o">&lt;</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span><span class="n">node</span><span class="p">[</span><span class="n">MaxN</span><span class="o">+</span><span class="mi">5</span><span class="p">];</span>
<span class="n">vector</span><span class="o">&lt;</span><span class="n">Node</span><span class="o">&gt;</span> <span class="n">Hash</span><span class="p">[</span><span class="n">MaxN</span><span class="o">+</span><span class="mi">5</span><span class="p">];</span>

<span class="kt">bool</span> <span class="nf">check</span><span class="p">(</span><span class="n">Node</span> <span class="n">a</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span><span class="o">+</span><span class="n">a</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">%</span><span class="n">MaxN</span><span class="p">;</span>
    <span class="k">if</span><span class="p">(</span><span class="n">Hash</span><span class="p">[</span><span class="n">sum</span><span class="p">].</span><span class="n">size</span><span class="p">()</span><span class="o">==</span><span class="mi">0</span><span class="p">)</span> <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="k">else</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">Hash</span><span class="p">[</span><span class="n">sum</span><span class="p">].</span><span class="n">size</span><span class="p">();</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="k">if</span><span class="p">(</span><span class="n">a</span><span class="p">.</span><span class="n">x</span> <span class="o">==</span> <span class="n">Hash</span><span class="p">[</span><span class="n">sum</span><span class="p">][</span><span class="n">i</span><span class="p">].</span><span class="n">x</span> <span class="o">&amp;&amp;</span> <span class="n">a</span><span class="p">.</span><span class="n">y</span> <span class="o">==</span> <span class="n">Hash</span><span class="p">[</span><span class="n">sum</span><span class="p">][</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="p">)</span> <span class="k">return</span> <span class="nb">true</span><span class="p">;</span>
        <span class="p">}</span>
        <span class="k">return</span> <span class="nb">false</span><span class="p">;</span>
    <span class="p">}</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="nf">insert</span><span class="p">(</span><span class="n">Node</span> <span class="n">one</span><span class="p">)</span>
<span class="p">{</span>
    <span class="kt">int</span> <span class="n">sum</span> <span class="o">=</span> <span class="n">abs</span><span class="p">(</span><span class="n">one</span><span class="p">.</span><span class="n">x</span> <span class="o">+</span> <span class="n">one</span><span class="p">.</span><span class="n">y</span><span class="p">)</span><span class="o">%</span><span class="n">MaxN</span><span class="p">;</span>
    <span class="n">Hash</span><span class="p">[</span><span class="n">sum</span><span class="p">].</span><span class="n">push_back</span><span class="p">(</span><span class="n">one</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="nf">solve</span><span class="p">()</span>
<span class="p">{</span>
    <span class="n">sort</span><span class="p">(</span><span class="n">node</span><span class="p">,</span><span class="n">node</span><span class="o">+</span><span class="n">n</span><span class="p">);</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">insert</span><span class="p">(</span><span class="n">node</span><span class="p">[</span><span class="n">i</span><span class="p">]);</span>
    <span class="kt">int</span> <span class="n">ans</span> <span class="o">=</span> <span class="mi">0</span><span class="p">;</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
    <span class="p">{</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">j</span><span class="o">=</span><span class="n">i</span><span class="o">+</span><span class="mi">1</span><span class="p">;</span><span class="n">j</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">j</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span> 
            <span class="n">Node</span> <span class="n">tmp</span><span class="p">;</span>
            <span class="n">tmp</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="o">+</span><span class="n">node</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="o">-</span><span class="n">node</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="p">;</span>
            <span class="n">tmp</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="o">+</span><span class="n">node</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">x</span><span class="o">-</span><span class="n">node</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">check</span><span class="p">(</span><span class="n">tmp</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>
            <span class="n">tmp</span><span class="p">.</span><span class="n">x</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">x</span><span class="o">+</span><span class="n">node</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="o">-</span><span class="n">node</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="p">;</span>
            <span class="n">tmp</span><span class="p">.</span><span class="n">y</span> <span class="o">=</span> <span class="n">node</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">y</span><span class="o">+</span><span class="n">node</span><span class="p">[</span><span class="n">j</span><span class="p">].</span><span class="n">x</span><span class="o">-</span><span class="n">node</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="p">;</span>
            <span class="k">if</span><span class="p">(</span><span class="o">!</span><span class="n">check</span><span class="p">(</span><span class="n">tmp</span><span class="p">))</span> <span class="k">continue</span><span class="p">;</span>
            <span class="n">ans</span><span class="o">++</span><span class="p">;</span>
        <span class="p">}</span>
    <span class="p">}</span>
    <span class="n">printf</span><span class="p">(</span><span class="s">"%d</span><span class="se">\n</span><span class="s">"</span><span class="p">,</span> <span class="n">ans</span><span class="o">/</span><span class="mi">2</span><span class="p">);</span>
<span class="p">}</span>
<span class="kt">void</span> <span class="nf">init</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">MaxN</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span> <span class="n">Hash</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">clear</span><span class="p">();</span>
<span class="p">}</span>
<span class="kt">int</span> <span class="nf">main</span><span class="p">()</span>
<span class="p">{</span>
    <span class="k">while</span><span class="p">(</span><span class="o">~</span><span class="n">scanf</span><span class="p">(</span><span class="s">"%d"</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">n</span><span class="p">))</span>
    <span class="p">{</span>
        <span class="n">init</span><span class="p">();</span>
        <span class="k">for</span><span class="p">(</span><span class="kt">int</span> <span class="n">i</span><span class="o">=</span><span class="mi">0</span><span class="p">;</span><span class="n">i</span><span class="o">&lt;</span><span class="n">n</span><span class="p">;</span><span class="n">i</span><span class="o">++</span><span class="p">)</span>
        <span class="p">{</span>
            <span class="n">scanf</span><span class="p">(</span><span class="s">"%d%d"</span><span class="p">,</span><span class="o">&amp;</span><span class="n">node</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">x</span><span class="p">,</span> <span class="o">&amp;</span><span class="n">node</span><span class="p">[</span><span class="n">i</span><span class="p">].</span><span class="n">y</span><span class="p">);</span>
        <span class="p">}</span>
        <span class="n">solve</span><span class="p">();</span>
    <span class="p">}</span>
<span class="p">}</span></code></pre></figure>

<h2 id="contest-summary">Contest Summary</h2>

<ul>
  <li>
    <p>由于队长请假，所以这场比赛是CPL大佬拖着本蒟蒻战战兢兢打完的 _(:з」∠)_</p>
  </li>
  <li>
    <p>F题 CPL大佬一波推出等比数列公式带走，不过正解是去推矩阵快速幂</p>
  </li>
  <li>
    <p>最后一个多小时怼08，由于蜜汁状态，没商量好做法就开始瞎敲，最后直接WA翻。赛后发现之前的代码应该是100W个vector内存出问题了，然后压缩成1W个vector，捣鼓好边界判定条件就过了，时间还算比较快，内存空间也很小。</p>
  </li>
  <li>
    <p>沟通很重要，沟通很重要，沟通很重要！！！</p>
  </li>
</ul>

                </div>
            </section>

            <!-- Email subscribe form at the bottom of the page -->
            
                <section class="subscribe-form">
                    <h3 class="subscribe-form-title">Subscribe to drone - 以终为始，慎终如始.</h3>
                    <p>Get the latest posts delivered right to your inbox</p>
                    <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email"  placeholder="youremail@example.com" />
    </div>
    <button class="" type="submit" disabled><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>

                </section>
            

            <footer class="post-full-footer">
                <!-- Everything inside the #author tags pulls data from the author -->
                <!-- #author-->
                
                    
                        <section class="author-card">
                            
                                <img class="author-profile-image" src="/assets/images/drone.png" alt="Drone" />
                            
                            <section class="author-card-content">
                                <h4 class="author-card-name"><a href="/author/Drone">Drone</a></h4>
                                
                                    <p>The professional publishing platform</p>
                                
                            </section>
                        </section>
                        <div class="post-full-footer-right">
                            <a class="author-card-button" href="/author/Drone">Read More</a>
                        </div>
                    
                
                <!-- /author  -->
            </footer>

            <!-- If you use Disqus comments, just uncomment this block.
            The only thing you need to change is "test-apkdzgmqhj" - which
            should be replaced with your own Disqus site-id. -->
            
                <section class="post-full-comments">
                    <div id="disqus_thread"></div>
                    <script>
                    /**
                    *  RECOMMENDED CONFIGURATION VARIABLES: EDIT AND UNCOMMENT THE SECTION BELOW TO INSERT DYNAMIC VALUES FROM YOUR PLATFORM OR CMS.
                    *  LEARN WHY DEFINING THESE VARIABLES IS IMPORTANT: https://disqus.com/admin/universalcode/#configuration-variables*/
                    /*
                    var disqus_config = function () {
                    this.page.url = PAGE_URL;  // Replace PAGE_URL with your page's canonical URL variable
                    this.page.identifier = PAGE_IDENTIFIER; // Replace PAGE_IDENTIFIER with your page's unique identifier variable
                    };
                    */
                    (function() { // DON'T EDIT BELOW THIS LINE
                    var d = document, s = d.createElement('script');
                    s.src = 'https://akirakiwi.disqus.com/embed.js';
                    s.setAttribute('data-timestamp', +new Date());
                    (d.head || d.body).appendChild(s);
                    })();
                    </script>
                    <noscript>Please enable JavaScript to view the <a href="https://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
                </section>
            

        </article>

    </div>
</main>

<!-- Links to Previous/Next posts -->
<aside class="read-next outer">
    <div class="inner">
        <div class="read-next-feed">
            
                
                
                
                
                    <article class="read-next-card"
                        
                            style="background-image: url(/assets/images/blog-cover.jpg)"
                        
                    >
                        <header class="read-next-card-header">
                            <small class="read-next-card-header-sitetitle">&mdash; drone - 以终为始，慎终如始. &mdash;</small>
                            
                                <h3 class="read-next-card-header-title"><a href="/tag/algorithm/">Algorithm</a></h3>
                            
                        </header>
                        <div class="read-next-divider"><svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M13 14.5s2 3 5 3 5.5-2.463 5.5-5.5S21 6.5 18 6.5c-5 0-7 11-12 11C2.962 17.5.5 15.037.5 12S3 6.5 6 6.5s4.5 3.5 4.5 3.5"/></svg>
</div>
                        <div class="read-next-card-content">
                            <ul>
                                
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/2017-%E5%BE%AE%E8%BD%AF%E9%A2%84%E7%A7%91%E7%94%9F%E7%AC%94%E8%AF%95">2017 微软预科生笔试</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/LeetCode-Weekly-Contest-77">LeetCode Weekly Contest 77</a></li>
                                        
                                    
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                            <li><a href="/WannaFly-Round-2-B">WannaFly Round #2 B</a></li>
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                                  
                                    
                                        
                                        
                                    
                                  
                                
                            </ul>
                        </div>
                        <footer class="read-next-card-footer">
                            <a href="/tag/algorithm/">
                                
                                    See all 32 posts  →
                                
                            </a>
                        </footer>
                    </article>
                
            

            <!-- If there's a next post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/%E5%9B%9B%E5%B7%9D%E7%9C%81%E7%AC%AC%E4%B8%83%E5%B1%8A%E5%A4%A7%E5%AD%A6%E7%94%9F%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B">
                <div class="post-card-image" style="background-image: url(/assets/images/stock/images-stock-photo-124520439.jpg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/%E5%9B%9B%E5%B7%9D%E7%9C%81%E7%AC%AC%E4%B8%83%E5%B1%8A%E5%A4%A7%E5%AD%A6%E7%94%9F%E7%A8%8B%E5%BA%8F%E8%AE%BE%E8%AE%A1%E7%AB%9E%E8%B5%9B">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Algorithm</span>
                            
                        
                    

                    <h2 class="post-card-title">四川省第七届大学生程序设计竞赛</h2>
                </header>
                <section class="post-card-excerpt">
                    <p>## Contest Information source: [It's from the Vjudge](https://vjudge.net/contest/158680#overview) ## Problem C 给出一个禁止串和一个原串，要求从原串中不断删除禁止串，然后输出删除后的新串。 数据范围：$ length ≤ 5\\times 10^{6}$ ## Solution 先求出禁止串的 $next$ 数组，然后在 $KMP$ 的匹配过程中，同时开一个答案串同步存储，开一个数组保存答案串和禁止串的匹配情况，并且维护它俩的长度。如果某次匹配到了禁止串末尾，那么回退禁止串长度，同时更新当前匹配位置。 ## AC code {% highlight c++ %} char no[MaxN];</p>
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/images/drone.png" alt="Drone" />
                        
                        <span class="post-card-author">
                            <a href="/author/Drone/">Drone</a>
                        </span>
                    
                
            </footer>
        </div>
    </article>

            

            <!-- If there's a previous post, display it using the same markup included from - partials/post-card.hbs -->
            
                
    <article class="post-card post-template">
        
            <a class="post-card-image-link" href="/CodeForces-Round-425-(Div.2)-D">
                <div class="post-card-image" style="background-image: url(/assets/images/stock/images-stock-photo-419599.jpg)"></div>
            </a>
        
        <div class="post-card-content">
            <a class="post-card-content-link" href="/CodeForces-Round-425-(Div.2)-D">
                <header class="post-card-header">
                    
                        
                            
                                <span class="post-card-tags">Algorithm</span>
                            
                        
                    

                    <h2 class="post-card-title">CodeForces Round #425 (Div. 2) D</h2>
                </header>
                <section class="post-card-excerpt">
                    <p>Problem Information source: It’s from the Round #425 (Div. 2) of the codeforces Description 给出一棵 $n$ 个节点的树，执行 $q$ 次查询，每次从中挑出三个节点，选择一个为终点使得另外两个点到终点的路径重合的点数最多，输出这个点数。 Misha and Grisha are funny boys, so they like to use new underground. The</p>
                </section>
            </a>
            <footer class="post-card-meta">
                
                    
                        
                        <img class="author-profile-image" src="/assets/images/drone.png" alt="Drone" />
                        
                        <span class="post-card-author">
                            <a href="/author/Drone/">Drone</a>
                        </span>
                    
                
            </footer>
        </div>
    </article>

            

        </div>
    </div>
</aside>

<!-- Floating header which appears on-scroll, included from includes/floating-header.hbs -->
<div class="floating-header">
    <div class="floating-header-logo">
        <a href="http://localhost:4000/">
            
                <img src="/assets/images/favicon.png" alt="drone - 以终为始，慎终如始. icon" />
            
            <span>drone - 以终为始，慎终如始.</span>
        </a>
    </div>
    <span class="floating-header-divider">&mdash;</span>
    <div class="floating-header-title">2017 Multi-University Training Contest #2</div>
    <div class="floating-header-share">
        <div class="floating-header-share-label">Share this <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24">
    <path d="M7.5 15.5V4a1.5 1.5 0 1 1 3 0v4.5h2a1 1 0 0 1 1 1h2a1 1 0 0 1 1 1H18a1.5 1.5 0 0 1 1.5 1.5v3.099c0 .929-.13 1.854-.385 2.748L17.5 23.5h-9c-1.5-2-5.417-8.673-5.417-8.673a1.2 1.2 0 0 1 1.76-1.605L7.5 15.5zm6-6v2m-3-3.5v3.5m6-1v2"/>
</svg>
</div>
        <a class="floating-header-share-tw" href="https://twitter.com/share?text=2017+Multi-University+Training+Contest+%232&amp;url=https://jekyller.github.io/jasper2/2017-Multi-University-Training-Contest-2"
            onclick="window.open(this.href, 'share-twitter', 'width=550,height=235');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M30.063 7.313c-.813 1.125-1.75 2.125-2.875 2.938v.75c0 1.563-.188 3.125-.688 4.625a15.088 15.088 0 0 1-2.063 4.438c-.875 1.438-2 2.688-3.25 3.813a15.015 15.015 0 0 1-4.625 2.563c-1.813.688-3.75 1-5.75 1-3.25 0-6.188-.875-8.875-2.625.438.063.875.125 1.375.125 2.688 0 5.063-.875 7.188-2.5-1.25 0-2.375-.375-3.375-1.125s-1.688-1.688-2.063-2.875c.438.063.813.125 1.125.125.5 0 1-.063 1.5-.25-1.313-.25-2.438-.938-3.313-1.938a5.673 5.673 0 0 1-1.313-3.688v-.063c.813.438 1.688.688 2.625.688a5.228 5.228 0 0 1-1.875-2c-.5-.875-.688-1.813-.688-2.75 0-1.063.25-2.063.75-2.938 1.438 1.75 3.188 3.188 5.25 4.25s4.313 1.688 6.688 1.813a5.579 5.579 0 0 1 1.5-5.438c1.125-1.125 2.5-1.688 4.125-1.688s3.063.625 4.188 1.813a11.48 11.48 0 0 0 3.688-1.375c-.438 1.375-1.313 2.438-2.563 3.188 1.125-.125 2.188-.438 3.313-.875z"/></svg>

        </a>
        <a class="floating-header-share-fb" href="https://www.facebook.com/sharer/sharer.php?u=https://jekyller.github.io/jasper2/2017-Multi-University-Training-Contest-2"
            onclick="window.open(this.href, 'share-facebook','width=580,height=296');return false;">
            <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32"><path d="M19 6h5V0h-5c-3.86 0-7 3.14-7 7v3H8v6h4v16h6V16h5l1-6h-6V7c0-.542.458-1 1-1z"/></svg>

        </a>
    </div>
    <progress class="progress" value="0">
        <div class="progress-container">
            <span class="progress-bar"></span>
        </div>
    </progress>
</div>


<!-- /post -->

<!-- The #contentFor helper here will send everything inside it up to the matching #block helper found in default.hbs -->


        <!-- Previous/next page links - displayed on every page -->
        

        <!-- The footer at the very bottom of the screen -->
        <footer class="site-footer outer">
            <div class="site-footer-content inner">
                <section class="copyright"><a href="http://localhost:4000/">drone</a> &copy; 2018</section>
                <section class="poweredby">Proudly published with <a href="https://jekyllrb.com/">Jekyll</a> &
                    <a href="https://pages.github.com/" target="_blank" rel="noopener">GitHub Pages</a>
                </section>
                <nav class="site-footer-nav">
                    <a href="/">Latest Posts</a>
                    <a href="https://facebook.com/username" target="_blank" rel="noopener">Facebook</a>
                    <a href="https://twitter.com/username" target="_blank" rel="noopener">Twitter</a>
                </nav>
            </div>
        </footer>

    </div>

    <!-- The big email subscribe modal content -->
    
        <div id="subscribe" class="subscribe-overlay">
            <a class="subscribe-overlay-close" href="#"></a>
            <div class="subscribe-overlay-content">
                
                    <img class="subscribe-overlay-logo" src="/assets/images/blog-icon.png" alt="drone - 以终为始，慎终如始." />
                
                <h1 class="subscribe-overlay-title">Subscribe to drone - 以终为始，慎终如始.</h1>
                <p class="subscribe-overlay-description">Stay up to date! Get all the latest &amp; greatest posts delivered straight to your inbox</p>
                <form method="post" action="/subscribe/" class="">
    <input class="confirm" type="hidden" name="confirm"  /><input class="location" type="hidden" name="location"  /><input class="referrer" type="hidden" name="referrer"  />

    <div class="form-group">
        <input class="subscribe-email" type="email" name="email"  placeholder="youremail@example.com" />
    </div>
    <button class="" type="submit" disabled><span>Subscribe</span></button>
    <script type="text/javascript">(function(g,h,o,s,t){h[o]('.location')[s]=h[o]('.location')[s] || g.location.href;h[o]('.referrer')[s]=h[o]('.referrer')[s] || h.referrer;})(window,document,'querySelector','value');</script>
</form>

            </div>
        </div>
    

    <!-- highlight.js -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/prism/1.10.0/components/prism-abap.min.js"></script>
    <script>$(document).ready(function() {
      $('pre code').each(function(i, block) {
        hljs.highlightBlock(block);
      });
    });</script>

    <!-- jQuery + Fitvids, which makes all video embeds responsive -->
    <script
        src="https://code.jquery.com/jquery-3.2.1.min.js"
        integrity="sha256-hwg4gsxgFZhOsEEamdOYGBf13FyQuiTwlAQgxVSNgt4="
        crossorigin="anonymous">
    </script>
    <script type="text/javascript" src="/assets/js/jquery.fitvids.js"></script>
    <script type="text/javascript" src="https://demo.ghost.io/assets/js/jquery.fitvids.js?v=724281a32e"></script>


    <!-- Paginator increased to "infinit" in _config.yml -->
    <!-- if paginator.posts  -->
    <!-- <script>
        var maxPages = parseInt('');
    </script>
    <script src="/assets/js/infinitescroll.js"></script> -->
    <!-- /endif -->

    


    <!-- Add Google Analytics  -->
    <!-- Google Analytics Tracking code -->
 <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-113198900-1', 'auto');
  ga('send', 'pageview');

 </script>


    <!-- The #block helper will pull in data from the #contentFor other template files. In this case, there's some JavaScript which we only want to use in post.hbs, but it needs to be included down here, after jQuery has already loaded. -->
    
        <script>

// NOTE: Scroll performance is poor in Safari
// - this appears to be due to the events firing much more slowly in Safari.
//   Dropping the scroll event and using only a raf loop results in smoother
//   scrolling but continuous processing even when not scrolling
$(document).ready(function () {
    // Start fitVids
    var $postContent = $(".post-full-content");
    $postContent.fitVids();
    // End fitVids

    var progressBar = document.querySelector('progress');
    var header = document.querySelector('.floating-header');
    var title = document.querySelector('.post-full-title');

    var lastScrollY = window.scrollY;
    var lastWindowHeight = window.innerHeight;
    var lastDocumentHeight = $(document).height();
    var ticking = false;

    function onScroll() {
        lastScrollY = window.scrollY;
        requestTick();
    }

    function onResize() {
        lastWindowHeight = window.innerHeight;
        lastDocumentHeight = $(document).height();
        requestTick();
    }

    function requestTick() {
        if (!ticking) {
            requestAnimationFrame(update);
        }
        ticking = true;
    }

    function update() {
        var trigger = title.getBoundingClientRect().top + window.scrollY;
        var triggerOffset = title.offsetHeight + 35;
        var progressMax = lastDocumentHeight - lastWindowHeight;

        // show/hide floating header
        if (lastScrollY >= trigger + triggerOffset) {
            header.classList.add('floating-active');
        } else {
            header.classList.remove('floating-active');
        }

        progressBar.setAttribute('max', progressMax);
        progressBar.setAttribute('value', lastScrollY);

        ticking = false;
    }

    window.addEventListener('scroll', onScroll, {passive: true});
    window.addEventListener('resize', onResize, false);

    update();
});
</script>

    

    <!-- Ghost outputs important scripts and data with this tag - it should always be the very last thing before the closing body tag -->
    <!-- ghost_foot -->

</body>
</html>
